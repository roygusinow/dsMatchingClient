% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ds.matchit_subclass.R
\name{ds.matchit_subclass}
\alias{ds.matchit_subclass}
\title{This function performs subclassification-based propensity score matching in a federated setting.
It estimates propensity scores via a logistic regression, computes quantiles of the scores based
on the specified estimand (ATE, ATT, or ATC), and assigns subclass labels accordingly.}
\usage{
ds.matchit_subclass(
  formula,
  data,
  subclass = 6,
  estimand = "ATE",
  newobj = "matched_df",
  len = 429,
  datasources = NULL
)
}
\arguments{
\item{formula}{A formula object. Specifies the GLM used to estimate the propensity score. The treatment variable must appear on the left-hand side.}

\item{data}{A character string. The name of the data frame on the server-side.}

\item{subclass}{An integer. Number of subclasses to create by slicing the propensity score distribution. Default is `6`.}

\item{estimand}{A character string. The causal estimand of interest: `"ATE"`, `"ATT"`, or `"ATC"`. Default is `"ATE"`.}

\item{newobj}{A character string. The name of the new object to create on each server containing the matched dataset. Default is `"matched_df_list"`.}

\item{len}{An integer. The number of bins used in the empirical CDF for quantile estimation. Default is `429`.}

\item{datasources}{A list of `DSConnection-class` objects. If `NULL`, the function uses `datashield.connections_find()` to detect active connections.}
}
\value{
A list containing:
\describe{
  \item{Summary}{Balance summaries before and after subclassification matching.}
  \item{Sample Sizes}{A table showing treated/control counts within each subclass.}
  \item{quantiles}{The estimated propensity score quantile cut points used for subclassification.}
  \item{subclass}{A numeric vector indexing subclass IDs.}
}
}
\description{
This function performs subclassification-based propensity score matching in a federated setting.
It estimates propensity scores via a logistic regression, computes quantiles of the scores based
on the specified estimand (ATE, ATT, or ATC), and assigns subclass labels accordingly.
}
\details{
This function runs a logistic GLM to estimate propensity scores, uses pooled ECDFs to determine subclass thresholds,
and then assigns subclass labels accordingly using `matchit_subclassDS`. It also computes and applies
subclass weights depending on the estimand.

**Server-side functions called**:
\itemize{
  \item `matchit_subclassDS`
  \item `assign_weights_subclassDS`
  \item `rangeDS`
}
}
\author{
Roy Gusinow
}
